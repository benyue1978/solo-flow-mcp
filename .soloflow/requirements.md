# 📋 需求文档（Requirements）

**项目名称：** soloflow-mcp  
**版本：** v1.0.6  
**文档更新时间：** 2025-08-07

---

## 🎯 项目概述

### 项目背景
`soloflow-mcp` 是一个基于 Model Context Protocol (MCP) 的本地服务，旨在为 AI 开发助手提供项目文档的访问与更新能力。通过将 `.soloflow/` 目录中的文档暴露为结构化接口，使 AI 能够更好地理解和管理项目状态。

### 核心价值
- **AI 友好**: 为 AI 提供结构化的项目文档访问接口
- **本地优先**: 无需外部服务，完全基于本地文件系统
- **标准化**: 遵循 MCP 协议，与 Cursor 等 IDE 无缝集成
- **生命周期支持**: 32个综合提示覆盖完整软件开发生命周期

---

## 📋 功能需求

### ✅ 核心功能（已完成）

#### 1. MCP 协议支持
- [x] **服务注册**: 实现 MCP 服务端，支持工具和提示注册
- [x] **通信协议**: 使用 StdioServerTransport 进行本地通信
- [x] **工具接口**: 提供 list, read, update, init 四个核心工具
- [x] **提示系统**: 32个综合提示覆盖完整软件开发生命周期

#### 2. 文档管理功能
- [x] **文档类型**: 支持 8 种预定义文档类型
  - overview.md - 项目概览
  - requirements.md - 需求文档
  - system_architecture.md - 系统架构
  - test_strategy.md - 测试策略
  - ui_design.md - UI设计
  - tasks.md - 任务计划
  - deployment.md - 部署配置
  - notes.md - 项目笔记
- [x] **读写操作**: 支持文档的读取和更新操作
- [x] **路径验证**: 严格的项目路径和文档类型验证
- [x] **格式支持**: 支持 Markdown 格式，兼容 Mermaid 等富文本语法

#### 3. 项目初始化
- [x] **自动创建**: 自动创建 `.soloflow/` 目录和必要文件
- [x] **配置生成**: 生成项目配置文件和目录结构
- [x] **状态反馈**: 提供详细的项目初始化状态反馈

#### 4. 综合提示系统
- [x] **核心功能**: 4个核心项目管理提示
- [x] **角色功能**: 5个基于不同开发角色的提示
- [x] **任务管理**: 6个高级任务管理和分解功能
- [x] **需求分析**: 3个需求分析和验证功能
- [x] **设计功能**: 5个设计和架构功能
- [x] **开发功能**: 4个代码实现和开发功能
- [x] **测试功能**: 5个测试和质量保证功能
- [x] **发布管理**: 5个完整的发布和部署生命周期管理

#### 5. 集成和发布
- [x] **NPM 包**: 发布为 NPM 包，支持 npx 安装
- [x] **Cursor 集成**: 提供 `.cursor/rules/` 配置，支持 Cursor 集成
- [x] **双语文档**: 提供英文和中文README文档
- [x] **场景指南**: 8个常见开发场景的使用指南

### 🔄 非功能需求（已完成）

#### 1. 性能要求
- [x] **响应时间**: 本地操作响应时间 < 100ms
- [x] **并发支持**: 支持单个项目的并发操作
- [x] **内存使用**: 轻量级实现，内存占用最小化

#### 2. 安全要求
- [x] **路径验证**: 严格验证项目根路径，防止路径遍历攻击
- [x] **文档类型约束**: 只允许访问预定义的文档类型
- [x] **权限控制**: 基于文件系统权限的安全控制

#### 3. 可靠性要求
- [x] **错误处理**: 完善的错误处理和异常恢复机制
- [x] **测试覆盖**: 50个测试用例，覆盖核心功能
- [x] **文档完整性**: 8个核心文档全部创建和更新

#### 4. 可维护性要求
- [x] **代码质量**: TypeScript 实现，类型安全
- [x] **模块化设计**: 清晰的模块分离和职责划分
- [x] **文档完善**: 完整的 API 文档和使用指南

---

## 🚀 技术需求

### 开发环境
- **语言**: TypeScript
- **运行时**: Node.js 18+
- **包管理**: NPM
- **测试框架**: Jest

### 依赖技术
- **MCP SDK**: @modelcontextprotocol/sdk
- **通信协议**: StdioServerTransport
- **文档格式**: Markdown
- **构建工具**: TypeScript Compiler

### 部署要求
- **本地运行**: 无需外部服务依赖
- **跨平台**: 支持 Windows, macOS, Linux
- **轻量级**: 最小化依赖，快速启动

---

## 📊 验收标准

### 功能验收
- [x] MCP 服务正常启动和注册
- [x] 所有工具操作（list, read, update, init）正常工作
- [x] 32个提示功能全部可用
- [x] 项目初始化功能正常
- [x] 文档读写操作正常
- [x] 路径验证和安全检查正常

### 性能验收
- [x] 服务启动时间 < 1秒
- [x] 工具操作响应时间 < 100ms
- [x] 内存使用 < 50MB

### 质量验收
- [x] 所有测试用例通过（50个测试）
- [x] 代码覆盖率 > 90%
- [x] 无严重安全漏洞
- [x] 文档完整且准确

### 集成验收
- [x] NPM 包正常发布和安装
- [x] Cursor 集成正常工作
- [x] 双语文档完整可用
- [x] 场景指南实用有效

---

## 📝 更新历史

- **2025-08-07**: 更新到 v1.0.6，添加双语文档支持和32个综合提示系统
- **2025-08-07**: 添加8个场景化使用指南和基于角色的提示功能
- **2025-07-30**: 完成 NPM 包发布和 Cursor 集成
- **2025-07-30**: 实现 6 个核心 prompts 功能
- **2025-07-30**: 完成测试框架搭建，47个测试通过
- **2025-07-24**: 初始版本，基础 MCP 服务实现
